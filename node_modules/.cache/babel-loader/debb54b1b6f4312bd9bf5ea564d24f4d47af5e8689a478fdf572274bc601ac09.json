{"ast":null,"code":"import PwaMobile from \"./PwaMobile.vue\";\nconst isStandalonePWAInstalled = () => {\n  if (\"standalone\" in navigator) {\n    // iOS devices\n    return navigator.standalone;\n  }\n  if (window.matchMedia && window.matchMedia(\"(display-mode: standalone)\").matches) {\n    // Other platforms with support for the media query\n    return true;\n  }\n  // PWA is not installed\n  return false;\n};\nconst isMobile = () => {\n  const userAgent = window.navigator.userAgent.toLowerCase();\n  return /iphone|ipad|ipod|android|webos|blackberry|windows phone/i.test(userAgent);\n};\nconst isInStandaloneMode = () => \"standalone\" in window.navigator && window.navigator.standalone;\nexport default {\n  name: \"PWAPrompt\",\n  data: () => ({\n    installEvent: null,\n    isIPhone: false\n  }),\n  components: {\n    PwaMobile\n  },\n  methods: {\n    showModal() {\n      this.$modal.show(PwaMobile, {\n        text: \"This text is passed as a property\"\n      }, {\n        draggable: true,\n        height: \"400px\",\n        width: \"300px\"\n      }, {\n        \"before-close\": event => {\n          sessionStorage.setItem(\"shown\", true);\n        }\n      });\n    },\n    show() {\n      this.$modal.show(\"pwa-prompt-modal\");\n    },\n    hideModal() {\n      this.$modal.hide(\"mobile-pwa-prompt-modal\");\n    },\n    hide() {\n      this.$modal.hide(\"pwa-prompt-modal\");\n    },\n    dismissPrompt() {\n      this.hide();\n    },\n    installPWA() {\n      this.installEvent.prompt();\n      this.installEvent.userChoice.then(choice => {\n        this.dismissPrompt(); // Hide the prompt once the user's clicked\n        if (choice.outcome === \"accepted\") {\n          // Do something additional if the user chose to install\n        } else {\n          // Do something additional if the user declined\n        }\n      });\n    }\n  },\n  mounted() {\n    const shown = sessionStorage.getItem(\"shown\");\n    if (isMobile() && !isInStandaloneMode() && !shown) {\n      if (!isStandalonePWAInstalled()) {\n        this.isIPhone = true;\n        this.showModal();\n      }\n    }\n  },\n  created() {\n    setTimeout(() => {\n      window.addEventListener(\"beforeinstallprompt\", e => {\n        e.preventDefault();\n        this.installEvent = e;\n        this.show();\n      });\n    }, 3000);\n  }\n};","map":{"version":3,"names":["PwaMobile","isStandalonePWAInstalled","navigator","standalone","window","matchMedia","matches","isMobile","userAgent","toLowerCase","test","isInStandaloneMode","name","data","installEvent","isIPhone","components","methods","showModal","$modal","show","text","draggable","height","width","event","sessionStorage","setItem","hideModal","hide","dismissPrompt","installPWA","prompt","userChoice","then","choice","outcome","mounted","shown","getItem","created","setTimeout","addEventListener","e","preventDefault"],"sources":["src/components/PWAPrompt.vue"],"sourcesContent":["<template>\n  <div>\n    <modal name=\"pwa-prompt-modal\" :width=\"300\" :height=\"400\">\n      <button class=\"btn-cancel\" @click=\"dismissPrompt\">\n        <font-awesome-icon icon=\"fa-solid fa-xmark\" />\n      </button>\n      <div class=\"prompt-content\">\n        <img class=\"logo\" src=\"@/assets/images/logo.png\" alt=\"NetCoord\" />\n        <h1>NetCoord App</h1>\n        <!-- <p>this website becomes a mobile app when added to home screen</p> -->\n        <p>this website becomes a mobile app when added to home screen</p>\n        <button class=\"btn-action\" @click=\"installPWA\">Tap to install</button>\n      </div>\n    </modal>\n  </div>\n</template>\n\n<script>\nimport PwaMobile from \"./PwaMobile.vue\";\nconst isStandalonePWAInstalled = () => {\n  if (\"standalone\" in navigator) {\n    // iOS devices\n    return navigator.standalone;\n  }\n  if (\n    window.matchMedia &&\n    window.matchMedia(\"(display-mode: standalone)\").matches\n  ) {\n    // Other platforms with support for the media query\n    return true;\n  }\n  // PWA is not installed\n  return false;\n};\nconst isMobile = () => {\n  const userAgent = window.navigator.userAgent.toLowerCase();\n\n  return /iphone|ipad|ipod|android|webos|blackberry|windows phone/i.test(\n    userAgent\n  );\n};\n\nconst isInStandaloneMode = () =>\n  \"standalone\" in window.navigator && window.navigator.standalone;\n\nexport default {\n  name: \"PWAPrompt\",\n  data: () => ({\n    installEvent: null,\n    isIPhone: false,\n  }),\n  components: { PwaMobile },\n\n  methods: {\n    showModal() {\n      this.$modal.show(\n        PwaMobile,\n        { text: \"This text is passed as a property\" },\n        { draggable: true, height: \"400px\", width: \"300px\" },\n        {\n          \"before-close\": (event) => {\n            sessionStorage.setItem(\"shown\", true);\n          },\n        }\n      );\n    },\n\n    show() {\n      this.$modal.show(\"pwa-prompt-modal\");\n    },\n\n    hideModal() {\n      this.$modal.hide(\"mobile-pwa-prompt-modal\");\n    },\n\n    hide() {\n      this.$modal.hide(\"pwa-prompt-modal\");\n    },\n    dismissPrompt() {\n      this.hide();\n    },\n    installPWA() {\n      this.installEvent.prompt();\n      this.installEvent.userChoice.then((choice) => {\n        this.dismissPrompt(); // Hide the prompt once the user's clicked\n        if (choice.outcome === \"accepted\") {\n          // Do something additional if the user chose to install\n        } else {\n          // Do something additional if the user declined\n        }\n      });\n    },\n  },\n\n  mounted() {\n    const shown = sessionStorage.getItem(\"shown\");\n\n    if (isMobile() && !isInStandaloneMode() && !shown) {\n      if (!isStandalonePWAInstalled()) {\n        this.isIPhone = true;\n        this.showModal();\n      }\n    }\n  },\n  created() {\n    setTimeout(() => {\n      window.addEventListener(\"beforeinstallprompt\", (e) => {\n        e.preventDefault();\n\n        this.installEvent = e;\n        this.show();\n      });\n    }, 3000);\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../scss/variable\";\n\n.btn-cancel {\n  font-size: 1.5em;\n  color: #848484;\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  right: 0;\n  top: 0;\n  margin: 10px;\n  border: none;\n  background: transparent;\n}\n.prompt-content {\n  padding: 2rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  min-height: 400px;\n\n  .logo {\n    width: 100px;\n    height: 100px;\n    border-radius: 20px;\n  }\n  h1 {\n    margin-top: 1rem;\n    margin-bottom: 0.8rem;\n    color: $primary;\n    font-size: 1.6em;\n  }\n  p {\n    font-size: 1.1em;\n    color: black;\n    text-align: center;\n  }\n  .btn-action {\n    margin-top: 1.2rem;\n    background: $primary;\n    color: white;\n    padding: 0.8rem 1.2rem;\n    font-size: 1.1em;\n    border: none;\n    border-radius: 8px;\n  }\n}\n</style>\n"],"mappings":"AAkBA,OAAAA,SAAA;AACA,MAAAC,wBAAA,GAAAA,CAAA;EACA,oBAAAC,SAAA;IACA;IACA,OAAAA,SAAA,CAAAC,UAAA;EACA;EACA,IACAC,MAAA,CAAAC,UAAA,IACAD,MAAA,CAAAC,UAAA,+BAAAC,OAAA,EACA;IACA;IACA;EACA;EACA;EACA;AACA;AACA,MAAAC,QAAA,GAAAA,CAAA;EACA,MAAAC,SAAA,GAAAJ,MAAA,CAAAF,SAAA,CAAAM,SAAA,CAAAC,WAAA;EAEA,kEAAAC,IAAA,CACAF,SACA;AACA;AAEA,MAAAG,kBAAA,GAAAA,CAAA,KACA,gBAAAP,MAAA,CAAAF,SAAA,IAAAE,MAAA,CAAAF,SAAA,CAAAC,UAAA;AAEA;EACAS,IAAA;EACAC,IAAA,EAAAA,CAAA;IACAC,YAAA;IACAC,QAAA;EACA;EACAC,UAAA;IAAAhB;EAAA;EAEAiB,OAAA;IACAC,UAAA;MACA,KAAAC,MAAA,CAAAC,IAAA,CACApB,SAAA,EACA;QAAAqB,IAAA;MAAA,GACA;QAAAC,SAAA;QAAAC,MAAA;QAAAC,KAAA;MAAA,GACA;QACA,gBAAAC,KAAA;UACAC,cAAA,CAAAC,OAAA;QACA;MACA,CACA;IACA;IAEAP,KAAA;MACA,KAAAD,MAAA,CAAAC,IAAA;IACA;IAEAQ,UAAA;MACA,KAAAT,MAAA,CAAAU,IAAA;IACA;IAEAA,KAAA;MACA,KAAAV,MAAA,CAAAU,IAAA;IACA;IACAC,cAAA;MACA,KAAAD,IAAA;IACA;IACAE,WAAA;MACA,KAAAjB,YAAA,CAAAkB,MAAA;MACA,KAAAlB,YAAA,CAAAmB,UAAA,CAAAC,IAAA,CAAAC,MAAA;QACA,KAAAL,aAAA;QACA,IAAAK,MAAA,CAAAC,OAAA;UACA;QAAA,CACA;UACA;QAAA;MAEA;IACA;EACA;EAEAC,QAAA;IACA,MAAAC,KAAA,GAAAZ,cAAA,CAAAa,OAAA;IAEA,IAAAhC,QAAA,OAAAI,kBAAA,OAAA2B,KAAA;MACA,KAAArC,wBAAA;QACA,KAAAc,QAAA;QACA,KAAAG,SAAA;MACA;IACA;EACA;EACAsB,QAAA;IACAC,UAAA;MACArC,MAAA,CAAAsC,gBAAA,wBAAAC,CAAA;QACAA,CAAA,CAAAC,cAAA;QAEA,KAAA9B,YAAA,GAAA6B,CAAA;QACA,KAAAvB,IAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}