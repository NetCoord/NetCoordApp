{"ast":null,"code":"import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport routes from \"./routes\";\nimport { auth } from \"../firebase\";\nVue.use(VueRouter);\nconst router = new VueRouter({\n  mode: \"history\",\n  base: process.env.BASE_URL,\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  let user = auth.currentUser;\n  if (to.matched.some(record => record.meta.requiresAuth) && !user) {\n    next({\n      name: \"login\",\n      query: {\n        nextUrl: to.fullPath\n      }\n    });\n    if (to.name != \"login\") {\n      router.app.$toast.error(\"please login to continue\", {\n        // override the global option\n        position: \"bottom\"\n      });\n    }\n  } else if (to.matched.some(record => record.meta.guest) && user) {\n    if (to.query.nextUrl) {\n      const queries = Object.keys(to.query).filter(key => key !== \"nextUrl\").map(key => `${key}=${to.query[key]}`).join(\"&\");\n      if (queries) {\n        return next({\n          path: `${to.query.nextUrl}?${queries}`\n        });\n      } else {\n        return next({\n          path: to.query.nextUrl\n        });\n      }\n    } else {\n      next({\n        name: \"home\"\n      });\n    }\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","routes","auth","use","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","user","currentUser","matched","some","record","meta","requiresAuth","name","query","nextUrl","fullPath","app","$toast","error","position","guest","queries","Object","keys","filter","key","map","join","path"],"sources":["/Users/sharpie/Desktop/Latest code update/src/router/index.js"],"sourcesContent":["import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport routes from \"./routes\";\nimport { auth } from \"../firebase\";\n\nVue.use(VueRouter);\n\nconst router = new VueRouter({\n  mode: \"history\",\n  base: process.env.BASE_URL,\n  routes,\n});\n\nrouter.beforeEach((to, from, next) => {\n  let user = auth.currentUser;\n\n  if (to.matched.some((record) => record.meta.requiresAuth) && !user) {\n    next({\n      name: \"login\",\n      query: { nextUrl: to.fullPath },\n    });\n    if (to.name != \"login\") {\n      router.app.$toast.error(\"please login to continue\", {\n        // override the global option\n        position: \"bottom\",\n      });\n    }\n  } else if (to.matched.some((record) => record.meta.guest) && user) {\n    if (to.query.nextUrl) {\n      const queries = Object.keys(to.query)\n        .filter((key) => key !== \"nextUrl\")\n        .map((key) => `${key}=${to.query[key]}`)\n        .join(\"&\");\n      if (queries) {\n        return next({\n          path: `${to.query.nextUrl}?${queries}`,\n        });\n      } else {\n        return next({\n          path: to.query.nextUrl,\n        });\n      }\n    } else {\n      next({\n        name: \"home\",\n      });\n    }\n  } else {\n    next();\n  }\n});\nexport default router;\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,MAAM,MAAM,UAAU;AAC7B,SAASC,IAAI,QAAQ,aAAa;AAElCH,GAAG,CAACI,GAAG,CAACH,SAAS,CAAC;AAElB,MAAMI,MAAM,GAAG,IAAIJ,SAAS,CAAC;EAC3BK,IAAI,EAAE,SAAS;EACfC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,QAAQ;EAC1BR;AACF,CAAC,CAAC;AAEFG,MAAM,CAACM,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,IAAIC,IAAI,GAAGZ,IAAI,CAACa,WAAW;EAE3B,IAAIJ,EAAE,CAACK,OAAO,CAACC,IAAI,CAAEC,MAAM,IAAKA,MAAM,CAACC,IAAI,CAACC,YAAY,CAAC,IAAI,CAACN,IAAI,EAAE;IAClED,IAAI,CAAC;MACHQ,IAAI,EAAE,OAAO;MACbC,KAAK,EAAE;QAAEC,OAAO,EAAEZ,EAAE,CAACa;MAAS;IAChC,CAAC,CAAC;IACF,IAAIb,EAAE,CAACU,IAAI,IAAI,OAAO,EAAE;MACtBjB,MAAM,CAACqB,GAAG,CAACC,MAAM,CAACC,KAAK,CAAC,0BAA0B,EAAE;QAClD;QACAC,QAAQ,EAAE;MACZ,CAAC,CAAC;IACJ;EACF,CAAC,MAAM,IAAIjB,EAAE,CAACK,OAAO,CAACC,IAAI,CAAEC,MAAM,IAAKA,MAAM,CAACC,IAAI,CAACU,KAAK,CAAC,IAAIf,IAAI,EAAE;IACjE,IAAIH,EAAE,CAACW,KAAK,CAACC,OAAO,EAAE;MACpB,MAAMO,OAAO,GAAGC,MAAM,CAACC,IAAI,CAACrB,EAAE,CAACW,KAAK,CAAC,CAClCW,MAAM,CAAEC,GAAG,IAAKA,GAAG,KAAK,SAAS,CAAC,CAClCC,GAAG,CAAED,GAAG,IAAM,GAAEA,GAAI,IAAGvB,EAAE,CAACW,KAAK,CAACY,GAAG,CAAE,EAAC,CAAC,CACvCE,IAAI,CAAC,GAAG,CAAC;MACZ,IAAIN,OAAO,EAAE;QACX,OAAOjB,IAAI,CAAC;UACVwB,IAAI,EAAG,GAAE1B,EAAE,CAACW,KAAK,CAACC,OAAQ,IAAGO,OAAQ;QACvC,CAAC,CAAC;MACJ,CAAC,MAAM;QACL,OAAOjB,IAAI,CAAC;UACVwB,IAAI,EAAE1B,EAAE,CAACW,KAAK,CAACC;QACjB,CAAC,CAAC;MACJ;IACF,CAAC,MAAM;MACLV,IAAI,CAAC;QACHQ,IAAI,EAAE;MACR,CAAC,CAAC;IACJ;EACF,CAAC,MAAM;IACLR,IAAI,CAAC,CAAC;EACR;AACF,CAAC,CAAC;AACF,eAAeT,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}