{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapActions } from 'vuex';\nimport AppFooter from \"../components/AppFooter\";\nimport NumPicker from \"./NumPicker.vue\";\nimport WeatherToggle from \"./WeatherToggle.vue\";\nexport default {\n  name: 'court-count-view',\n  components: {\n    AppFooter,\n    NumPicker,\n    WeatherToggle\n  },\n  props: {\n    court: {\n      type: Object\n    }\n  },\n  data() {\n    return {\n      freeCourt: null,\n      courtNum: null,\n      isRaining: null\n    };\n  },\n  computed: {\n    options() {\n      if (this.isRaining) {\n        return [{\n          value: 0,\n          name: \"Wet\"\n        }];\n      } else {\n        return [...Array(this.courtNum + 1).keys()].sort((a, b) => a > b ? -1 : 1).map(i => ({\n          label: i,\n          value: i,\n          name: i\n        }));\n      }\n    }\n  },\n  watch: {\n    court(val) {\n      this.refreshCourt();\n    }\n  },\n  mounted() {\n    this.refreshCourt();\n  },\n  methods: {\n    ...mapActions('court', ['updateCourt']),\n    refreshCourt() {\n      const {\n        courtNum,\n        freeCourt,\n        isRaining\n      } = this.court || {};\n      this.courtNum = courtNum || 0;\n      this.freeCourt = freeCourt || 0;\n      this.isRaining = isRaining || false;\n    },\n    async handleSubmit() {\n      if (this.court) {\n        const payload = {\n          id: this.court.id,\n          isRaining: this.isRaining,\n          freeCourt: this.isRaining ? 0 : this.freeCourt\n        };\n        await this.updateCourt(payload);\n        this.$router.push({\n          name: 'home'\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapActions","AppFooter","NumPicker","WeatherToggle","name","components","props","court","type","Object","data","freeCourt","courtNum","isRaining","computed","options","value","Array","keys","sort","a","b","map","i","label","watch","val","refreshCourt","mounted","methods","handleSubmit","payload","id","updateCourt","$router","push"],"sources":["src/components/CourtCountView.vue"],"sourcesContent":["<template>\n  <div>\n    <div>\n      <div class=\"heading\">\n        <h2>Help us make<br/>NetCoord even better.</h2>\n        <h2>What's happening at this park?</h2>\n      </div>\n      <weather-toggle v-model=\"isRaining\" />\n    </div>\n    <div>\n      <h2>Number of Courts free right now</h2>\n      <num-picker v-model=\"freeCourt\" :options=\"options\" />\n    </div>\n    <app-footer :disabled=\"!court\" @submit=\"handleSubmit\" />\n  </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex';\nimport AppFooter from \"../components/AppFooter\";\nimport NumPicker from \"./NumPicker.vue\";\nimport WeatherToggle from \"./WeatherToggle.vue\";\n\nexport default {\n  name: 'court-count-view',\n  components: { AppFooter, NumPicker, WeatherToggle },\n  props: {\n    court: {\n      type: Object\n    }\n  },\n  data() {\n    return {\n      freeCourt: null,\n      courtNum: null,\n      isRaining: null\n    };\n  },\n  computed: {\n    options () {\n      if (this.isRaining) {\n        return [{ value: 0, name: \"Wet\" }]\n      } else {\n        return [...Array(this.courtNum + 1).keys()] \n          .sort((a, b) => a > b ? -1 : 1)\n          .map(i => ({ label: i, value: i, name: i }))\n      }\n    }\n  },\n  watch: {\n    court (val) {\n      this.refreshCourt()\n    }\n  },\n  mounted () {\n    this.refreshCourt();\n  },\n  methods: {\n    ...mapActions('court', ['updateCourt']),\n    refreshCourt () {\n      const { courtNum, freeCourt, isRaining } = this.court || {}\n      this.courtNum = courtNum || 0\n      this.freeCourt = freeCourt || 0\n      this.isRaining = isRaining || false\n    },\n    async handleSubmit () {\n      if (this.court) {\n        const payload = {\n          id: this.court.id,\n          isRaining: this.isRaining,\n          freeCourt: this.isRaining ? 0 : this.freeCourt\n        }\n        await this.updateCourt(payload)\n        this.$router.push({\n          name: 'home'\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.heading {\n  text-align: center;\n  margin-bottom: 10px;\n\n  h2 {\n    margin-top: 4px;\n    margin-bottom: 4px;\n  }\n}\n\nh2 {\n  font-size: 1.2em;\n  font-weight: 600;\n  margin-top: 24px;\n  margin-bottom: 18px;\n  text-align: center;\n  line-height: 1.3;\n  margin-left: auto;\n  margin-right: auto;\n}\n</style>\n"],"mappings":";AAkBA,SAAAA,UAAA;AACA,OAAAC,SAAA;AACA,OAAAC,SAAA;AACA,OAAAC,aAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAJ,SAAA;IAAAC,SAAA;IAAAC;EAAA;EACAG,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC;IACA;EACA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,QAAA;MACAC,SAAA;IACA;EACA;EACAC,QAAA;IACAC,QAAA;MACA,SAAAF,SAAA;QACA;UAAAG,KAAA;UAAAZ,IAAA;QAAA;MACA;QACA,WAAAa,KAAA,MAAAL,QAAA,MAAAM,IAAA,IACAC,IAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAD,CAAA,GAAAC,CAAA,WACAC,GAAA,CAAAC,CAAA;UAAAC,KAAA,EAAAD,CAAA;UAAAP,KAAA,EAAAO,CAAA;UAAAnB,IAAA,EAAAmB;QAAA;MACA;IACA;EACA;EACAE,KAAA;IACAlB,MAAAmB,GAAA;MACA,KAAAC,YAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAD,YAAA;EACA;EACAE,OAAA;IACA,GAAA7B,UAAA;IACA2B,aAAA;MACA;QAAAf,QAAA;QAAAD,SAAA;QAAAE;MAAA,SAAAN,KAAA;MACA,KAAAK,QAAA,GAAAA,QAAA;MACA,KAAAD,SAAA,GAAAA,SAAA;MACA,KAAAE,SAAA,GAAAA,SAAA;IACA;IACA,MAAAiB,aAAA;MACA,SAAAvB,KAAA;QACA,MAAAwB,OAAA;UACAC,EAAA,OAAAzB,KAAA,CAAAyB,EAAA;UACAnB,SAAA,OAAAA,SAAA;UACAF,SAAA,OAAAE,SAAA,YAAAF;QACA;QACA,WAAAsB,WAAA,CAAAF,OAAA;QACA,KAAAG,OAAA,CAAAC,IAAA;UACA/B,IAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}